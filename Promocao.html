<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
	<title>Alfa delivery</title>
	<link href="alfa_css_homeacc.css" rel="stylesheet">
	<link rel="stylesheet" href="carrinho.css">
	<link href="categoria.css" rel="stylesheet">
	<link href="reset_css.css" rel="stylesheet">
	<link href="Alfa_css_footer.css" rel="stylesheet">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">



	<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>

	<style type="text/css">
		
		.tag{

    z-index: 10;
    position: relative;
    width: 70%;
    margin-left: 65px;
		}


	</style>
</head>
<link rel="icon" href="./assets/Alfanavlogo.png">


<!-- CORPO - CONTEÚDO -->
<body>

	<!-- CABEÇALHO PADRÃO (LOGO + MENU) -->

	<header class="cabecalho" id="idCabecalho">
		<div class="container">
			<div class="cabecalho__cadastro">


				<div class="cabecalho__fundoImagem">

					<img src="./assets/cnt_cli.png" alt="Entrar">
				</div>
				<p><a id="conta" href="Alfa_account.html">Cliente</a></p>




				<div class="cabecalho__logoAlfa">
					<figure>
						<a href="Alfa_homeCliente.html">
							<img src = "./assets/alfa_logo.png" alt="Logo Alfa">
						</a>
						<figcaption>Logo Alfa</figcaption>
					</figure>
				</div>

				<div class="Caixa__pesquisar">
					<button>
						<img src="./assets/lupa.png" alt="">
					</button>
					<input type="text" >
				</div>
			</div>
		</header>
		<nav class="linebar">
			<div class="mobile-menu">
				<div class="line1"></div>
				<div class="line2"></div>
				<div class="line3"></div>
			</div>
			<ul class="nav-list">
				<li><a class="a1" href="Alfa_homeCliente.html">Início</a></li>
				<li><a class="a1" href="#">Recomendados</a></li>
				<li><a class="a1" href="#">Em promoção</a></li>
				<li><a class="a1" href="#">Acompanhe aqui!</a></li>
				<li><a class="a1"  href="usuario.html">Fórum</a></li>
				<li><a class="a1" href="Sobre.html">Sobre</a></li>
			</ul>
		</nav>




<div id="mySidenav" class="sidenav">
   <a href="javascript:void(0)" class="closebtn" id="closebtn">&times;</a>
   <div class="secaoCarrinho__conteudo">
      <!-- LISTA DE ITENS NO CARRINHO -->
      <ul class="secaoCarrinho__listaItens">

      </ul>
      <div class="secaoCarrinho__total">
        <p>Total</p>
        <span>0,00</span>
     </div>

     <div class="secaoCarrinho__formaPagamento">
     	<a href="FinalizarCarrinho.html">
        <button>Escolher forma de pagamento</button>
    </a>
     </div>
  </div>
</div>


<div class="carrinho_icone">
   <a id="opennav">
     <div class="carrinho_fundoImagem">
       <img src="./assets/carrinho.png" alt="Entrar">
    </div>
 </a>
</div>

		<script>
        document.getElementById("opennav").addEventListener("click", function() {
            document.getElementById("mySidenav").style.width = "450px";
        })

        document.getElementById("closebtn").addEventListener("click", function() {
            document.getElementById("mySidenav").style.width = "0";
            document.getElementById("main").style.marginLeft = "0";
        })
    </script>



  <h2 style="margin-left: 50px;"> Promoções</h2>



	<section class="produtos-section" style="margin-left: 150px; width: 1000px;">

 <div class="produto-link">
   <ul class="produto"></ul>
</div>
</section>


	<div class="footer-clean">
		<footer>
			<div class="container">
				<div class="col-lg-3 item social"><a href="#"><i class="icon ion-social-instagram"></i></a>
					<p class="copyright">Alfa Delivery © 2022</p>
				</div>
			</div>
	</footer>
</div>


<script type="text/javascript" src="alfa_js.js"> </script>

 <script type="text/javascript">
 	

   document.getElementById("opennav").addEventListener("click", function() {
     document.getElementById("mySidenav").style.width = "550px";
  })

   document.getElementById("closebtn").addEventListener("click", function() {
     document.getElementById("mySidenav").style.width = "0";
     document.getElementById("main").style.marginLeft = "0";
  })


   const menuProdutos = [
   {
    id: 12,
    nome: 'Remédio Triad',
    preco: 13.95,
    categoria: 'higiene',
    imagem: './assets/off1.jpg',
    farmalink: './InterfaceFarma/Tela_FarmáciaBoa.html',
    farmalogo: './assets/Farma1.png',
    off: 'De R$15,90 por'
 },
  {
    id: 13,
    nome: 'Remédio Moo',
    preco: 19.80,
    categoria: 'higiene',
    imagem: './assets/off2.jpg',
    farmalink: './InterfaceFarma/Tela_FarmáciaAlto.html',
    farmalogo: './assets/Farma2.png',
    off: 'De R$22,00 por'
 },
  {
    id: 14,
    nome: 'Suplemento Mate',
    preco: 30.15,
    categoria: 'higiene',
    imagem: './assets/off3.png',
    farmalink: './InterfaceFarma/Tela_FarmáciaFlor.html',
    farmalogo: './assets/Farma3.png',
     off: 'De R$33,50 por'
 },
  {
    id: 15,
    nome: 'Sabão Liq. Chiclete',
    preco: 17.28,
    categoria: 'higiene',
    imagem: './assets/off4.jpg',
    farmalink: './InterfaceFarma/Tela_FarmáciaBoa.html',
    farmalogo: './assets/Farma1.png',
     off: 'De R$19,20 por'
 },
 {
    id: 16,
    nome: 'Spray Menta',
    preco: 9.00,
    categoria: 'higiene',
    imagem: './assets/off5.png',
    farmalink: './InterfaceFarma/Tela_FarmáciaFlor.html',
    farmalogo: './assets/Farma3.png',
     off: 'De R$10,00 por'
 },
  {
    id: 17,
    nome: 'Remédio Quelo',
    preco: 22.50,
    categoria: 'higiene',
    imagem: './assets/off6.jpg',
    farmalink: './InterfaceFarma/Tela_FarmáciaBoa.html',
    farmalogo: './assets/Farma1.png',
     off: 'De R$25,00 por'
 },
  {
    id: 18,
    nome: 'Creme Tulip (2 uni)',
    preco: 37.80,
    categoria: 'higiene',
    imagem: './assets/off7.jpg',
    farmalink: './InterfaceFarma/Tela_FarmáciaAlto.html',
    farmalogo: './assets/Farma2.png',
     off: 'De R$42,00 por'
 },
 {
    id: 19,
    nome: 'Creme Prisma',
    preco: 23.67,
    categoria: 'higiene',
    imagem: './assets/off8.jpg',
    farmalink: './InterfaceFarma/Tela_FarmáciaAlto.html',
    farmalogo: './assets/Farma2.png',
     off: 'De 26,30 por'
 },

 ];

 let listaDestaque = document.querySelector(".produto")
 let listaCarrinho = document.querySelector('.secaoCarrinho__listaItens');

 const containerTotal = document.querySelector('.secaoCarrinho__total > span');

 function construirLayoutPratos(ulContainer, item, classePrato){


  let li = document.createElement("li")
    let tag = document.createElement("img")
    tag.className = "tag";
    tag.src = "./assets/tagoff.png"

  let a = document.createElement("a")



  let figure = document.createElement("figure")
  let link = document.createElement("a")
  link.href = item.link
  let img = document.createElement("img")
  img.className = "produto-imgmn";
  img.src = item.imagem
  img.alt = item.nome

  let figcaption = document.createElement("figcaption")
  figcaption.innerText = item.nome


  let div = document.createElement("div")
  let h3 = document.createElement("h3")
  h3.innerText = item.nome


  let span = document.createElement("span")
  span.innerText =  item.preco.toFixed(2) 

   let p = document.createElement("p")
    p.innerText = "R$"
    p.className = "off-txt"
   let off = document.createElement("p")
   off.className = "off"
off.innerText = item.off

let a1 = document.createElement("a")
a1.href = item.farmalink

let logo = document.createElement("img")
logo.className = "farmalogo";
logo.src = item.farmalogo

  let button = document.createElement("button")
  button.className = "button";

  let spanbtn = document.createElement("span")
 spanbtn.textContent = 'ㅤ';

  let divbtn = document.createElement("div")
  divbtn.className = "cart";
  let svg = document.createElement("svg")
svg.setAttribute("viewBox","0 0 36 26")



  let polyline = document.createElementNS("http://www.w3.org/2000/svg","polyline")
  polyline.setAttributeNS("polyline","points","1 2.5 6 2.5 10 18.5 25.5 18.5 28.5 7.5 7.5 7.5")

  let polyline1 = document.createElementNS("http://www.w3.org/2000/svg","polyline")
  polyline1.setAttributeNS("polyline","points","15 13.5 17 15.5 22 10.5")

  li.appendChild(tag)
  li.appendChild(a)


  button.dataset.id = item.id;

    //MONTANDO IMAGEM
    link.appendChild(img)
    figure.appendChild(link)
    figure.appendChild(figcaption)
    a.appendChild(figure)

    div.appendChild(h3)
    div.appendChild(off)
     div.appendChild(p)
    div.appendChild(span)
    div.appendChild(a1)
    a1.appendChild(logo)
 
    a.appendChild(div)
    div.appendChild(button)
    button.appendChild(spanbtn)
    button.appendChild(divbtn)
    divbtn.appendChild(svg)
    svg.appendChild(polyline)
    svg.appendChild(polyline1)

    li.classList.add(classePrato)
    ulContainer.appendChild(li)

    button.addEventListener('click', adicionarNoCarrinho);
 
 document.querySelectorAll('.button').forEach(button => button.addEventListener('click', e => {
               if(!button.classList.contains('loading')) {
                 button.classList.add('loading');
                 setTimeout(() => button.classList.remove('loading'), 3700);
              }
              e.preventDefault();
           }));

 }

 for(let cont = 0; cont < menuProdutos.length; cont++){
  let item = menuProdutos[cont]

  construirLayoutPratos(listaDestaque,item, "secaoPratosDestaque__itemPrato")
}

function construirLayoutCarrinho(item) {
  const li = document.createElement('li');
  const div = document.createElement('div');
  const h3 = document.createElement('h3');
  const span = document.createElement('span');
  const p = document.createElement('p');
  const button = document.createElement('button');

  h3.innerText = item.nome;
  span.innerText = item.preco.toFixed(2);
  button.innerText = 'Remover';

  div.appendChild(h3);
  div.appendChild(span);

  li.appendChild(div);
  li.appendChild(button);

  li.classList.add('secaoCarrinho__item');

  listaCarrinho.appendChild(li);

  button.addEventListener('click', removerDoCarrinho);
}

function adicionarNoCarrinho(evento) {

  const elementoClicado = evento.currentTarget;
  const idElementoClicado = elementoClicado.dataset.id;

  const pratoSelecionado = menuProdutos[idElementoClicado];

  construirLayoutCarrinho(pratoSelecionado);
  atualizarTotal();
}

function removerDoCarrinho(evento) {
  const elementoClicado = evento.currentTarget;
  const elementoPai = elementoClicado.parentElement;

  elementoPai.remove();
  atualizarTotal();
}

function atualizarTotal() {
  const listaPrecos = document.querySelectorAll('.secaoCarrinho__item > div > span');

  let total = 0;
  for(let contador = 0; contador < listaPrecos.length; contador++){
    const elementoSpan = listaPrecos[contador];
    const precoNumero = Number(elementoSpan.innerText);
    total += precoNumero;
 }

 total = total.toFixed(2);
 containerTotal.innerText = total;
}




 </script>
</main>
</body>
</html>